(this["webpackJsonpanonymous-feedback"]=this["webpackJsonpanonymous-feedback"]||[]).push([[3],{101:function(t,e){},103:function(t,e){},172:function(t,e){},174:function(t,e){},197:function(t,e){},198:function(t,e){},206:function(t,e,n){"use strict";n.r(e);var a=n(204),r=n(94),c=n(0),i=n.n(c),o=n(95),s=n(49),l=n(50),u=n(93),d=n(92),f=(n(96),n(205)),g=(n(97),function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).hoverHandler=function(t){var e=t.target.parentElement.getElementsByClassName("star"),n=t.target.dataset.value;Array.from(e).forEach((function(t){t.style.color=n>=t.dataset.value?"#C1F0FF":"gray"}))},a.setRating=function(t){var e=a.refs.rating.getElementsByClassName("star");Array.from(e).forEach((function(t){t.style.color=a.state.currentRating>=t.dataset.value?"#C1F0FF":"gray"}))},a.starClickHandler=function(t){var e=t.target.dataset.value;a.setState({currentRating:e}),a.props.onClick&&a.props.onClick(e)},a.state={currentRating:a.props.currentRating},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setRating()}},{key:"render",value:function(){var t=this;return i.a.createElement("div",{className:"rating",ref:"rating","data-rating":this.state.currentRating,onMouseOut:this.setRating},Object(f.a)(Array(+this.props.numberOfStars).keys()).map((function(e){return i.a.createElement("span",{className:"star",key:e+1,"data-value":e+1,onMouseOver:t.hoverHandler,onClick:t.starClickHandler},"\u2605")})))}}]),n}(c.Component)),m=n(98),p=n.n(m),h=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(s.a)(this,n),(a=e.call(this,t)).handleChange=function(t){a.setState(Object(o.a)({},t.target.name,t.target.value))},a.setRating=function(t){a.setState({rating:t})},a.broadcastFeedback=function(){a.client.publish("anonymous-feedback/json",JSON.stringify({likert_score:a.state.rating,description:a.state.description}),a.retain),a.setState({rating:null,description:null}),window.location.reload(!1)},a.state={rating:null,description:null},a.options={ca:a.props.caFile,rejectUnauthorized:!1},a.retain={retain:!0,qos:1},a.client=p.a.connect("wss://wss.aidanparkinson.xyz:8081",a.options),console.log("connected flag  "+a.client.connected),a.client.on("connect",(function(){console.log("connected  "+this.client.connected)})),a}return Object(l.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"form-input"},i.a.createElement("div",{className:"form-input-rating"},i.a.createElement(g,{numberOfStars:"5",currentRating:null,onClick:this.setRating})),i.a.createElement("div",{className:"actions"},i.a.createElement("button",{onClick:this.broadcastFeedback},"Submit")),i.a.createElement("textarea",{name:"description",id:"description",onChange:this.handleChange,placeholder:"A description of your experience..."})))}}]),n}(i.a.Component);e.default=function(){var t=Object(c.useState)(null),e=Object(a.a)(t,2),n=e[0],o=e[1];return Object(c.useEffect)((function(){var t=null;try{t=r.readFileSync("/etc/ssl/certs/learning-iot-ca.crt")}catch(e){}t&&o(t)}),[]),console.log(n),n?i.a.createElement(h,{caFile:n}):i.a.createElement("div",null,"loading")}},96:function(t,e,n){},97:function(t,e,n){}}]);
//# sourceMappingURL=3.d7751214.chunk.js.map