{"version":3,"sources":["components/affective-response/star-rating.js","components/form/form.js"],"names":["StarRating","props","hoverHandler","ev","stars","target","parentElement","getElementsByClassName","hoverValue","dataset","value","Array","from","forEach","star","style","color","setRating","refs","rating","state","currentRating","starClickHandler","setState","onClick","this","className","ref","data-rating","onMouseOut","numberOfStars","keys","map","n","key","data-value","onMouseOver","Component","caFile","fs","options","clientId","macaddress","ca","rejectUnauthorized","client","mqtt","connect","console","log","connected","on","Form","handleChange","name","broadcastFeedback","publish","likert_score","description","id","onChange","placeholder","React"],"mappings":"4UAkEeA,G,wDA7Db,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAURC,aAAe,SAAAC,GACb,IAAMC,EAAQD,EAAGE,OAAOC,cAAcC,uBAAuB,QACvDC,EAAaL,EAAGE,OAAOI,QAAQC,MACrCC,MAAMC,KAAKR,GAAOS,SAAQ,SAAAC,GACxBA,EAAKC,MAAMC,MAAQR,GAAcM,EAAKL,QAAQC,MAA3B,UAA+C,WAfnD,EAmBnBO,UAAY,SAAAd,GACV,IAAMC,EAAQ,EAAKc,KAAKC,OAAOZ,uBAAuB,QACtDI,MAAMC,KAAKR,GAAOS,SAAQ,SAAAC,GACxBA,EAAKC,MAAMC,MACT,EAAKI,MAAMC,eAAiBP,EAAKL,QAAQC,MAAzC,UAA6D,WAvBhD,EA2BnBY,iBAAmB,SAAAnB,GACjB,IAAIgB,EAAShB,EAAGE,OAAOI,QAAQC,MAC/B,EAAKa,SAAS,CAAEF,cAAeF,IAC5B,EAAKlB,MAAMuB,SACZ,EAAKvB,MAAMuB,QAAQL,IA7BrB,EAAKC,MAAQ,CACXC,cAAe,EAAKpB,MAAMoB,eAHX,E,gEAQjBI,KAAKR,c,+BA2BG,IAAD,OACP,OACE,yBACES,UAAU,SACVC,IAAI,SACJC,cAAaH,KAAKL,MAAMC,cACxBQ,WAAYJ,KAAKR,WAEhB,YAAIN,OAAOc,KAAKxB,MAAM6B,eAAeC,QAAQC,KAAI,SAAAC,GAChD,OACE,0BACEP,UAAU,OACVQ,IAAKD,EAAE,EACPE,aAAYF,EAAE,EACdG,YAAa,EAAKlC,aAClBsB,QAAS,EAAKF,kBALhB,kB,GA9Cae,c,mCCKrBC,E,MAASC,aAAgB,4CAEzBC,EAAU,CACVC,SAAUC,IAIVC,GAAIL,EACJM,oBAAoB,GAKpBC,EAASC,IAAKC,QAAQ,mCAAoCP,GAC9DQ,QAAQC,IAAI,mBAAqBJ,EAAOK,WAExCL,EAAOM,GAAG,WAAU,WACpBH,QAAQC,IAAI,cAAeJ,EAAOK,c,IAG5BE,E,kDACJ,WAAYnD,GAAQ,IAAD,8BACjB,cAAMA,IAORoD,aAAe,SAAAlD,GACb,EAAKoB,SAAL,eACGpB,EAAGE,OAAOiD,KAAOnD,EAAGE,OAAOK,SAVb,EAcnBO,UAAY,SAAAE,GACV,EAAKI,SAAS,CAAEJ,OAAQA,KAfP,EAkBnBoC,kBAAoB,WAClBV,EAAOW,QAAP,6BAAqCd,IAArC,SAAwD,CAACe,aAAc,EAAKrC,MAAMD,OAAQuC,YAAa,EAAKtC,MAAMsC,cAClH,EAAKnC,SAAS,CAAEJ,OAAQ,KAAMuC,YAAa,QAlB3C,EAAKtC,MAAQ,CACXD,OAAQ,KACRuC,YAAa,MAJE,E,qDAwBlB,OACG,6BACE,yBAAKhC,UAAU,cACb,yBAAKA,UAAU,qBACb,kBAAC,EAAD,CACEI,cAAc,IACdT,cAAe,KACfG,QAASC,KAAKR,aAGlB,yBAAKS,UAAU,WACb,4BAAQF,QAASC,KAAK8B,mBAAtB,WAIF,8BACED,KAAK,cACLK,GAAG,cACHC,SAAUnC,KAAK4B,aACfQ,YAAY,8C,GA5CLC,IAAMzB,WAoDVe,a","file":"static/js/3.2bb0f0bb.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nimport './star-rating.css';\n\nclass StarRating extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentRating: this.props.currentRating\n    };\n  }\n\n  componentDidMount() {\n    this.setRating();\n  }\n\n  hoverHandler = ev => {\n    const stars = ev.target.parentElement.getElementsByClassName('star');\n    const hoverValue = ev.target.dataset.value;\n    Array.from(stars).forEach(star => {\n      star.style.color = hoverValue >= star.dataset.value ? `#C1F0FF` : 'gray';\n    });\n  };\n\n  setRating = ev => {\n    const stars = this.refs.rating.getElementsByClassName('star');\n    Array.from(stars).forEach(star => {\n      star.style.color =\n        this.state.currentRating >= star.dataset.value ? `#C1F0FF` : 'gray';\n    });\n  };\n\n  starClickHandler = ev => {\n    let rating = ev.target.dataset.value;\n    this.setState({ currentRating: rating }); // set state so the rating stays highlighted\n    if(this.props.onClick){\n      this.props.onClick(rating); // emit the event up to the parent\n    }\n  };\n\n  render() {\n    return (\n      <div\n        className=\"rating\"\n        ref=\"rating\"\n        data-rating={this.state.currentRating}\n        onMouseOut={this.setRating}\n      >\n        {[...Array(+this.props.numberOfStars).keys()].map(n => {\n          return (\n            <span\n              className=\"star\"\n              key={n+1}\n              data-value={n+1}\n              onMouseOver={this.hoverHandler}\n              onClick={this.starClickHandler}\n            >\n              &#9733;\n            </span>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default StarRating;\n","import React from 'react';\n\nimport './form.css';\nimport StarRating from '../affective-response/star-rating';\nimport mqtt from 'mqtt';\n\nimport macaddress from 'macaddress';\nimport * as fs from 'fs';\n\nvar caFile = fs.readFileSync('/etc/ca-certificates/learning-iot-ca.crt');\n\nvar options = {\n    clientId: macaddress,\n    // port: 8883,\n    // host: '35.176.252.212',\n    // key: KEY,\n    ca: caFile,\n    rejectUnauthorized: false,\n    // The CA list will be used to determine if server is authorized\n    // protocol: 'mqtts'\n  }\n\nvar client = mqtt.connect(\"wss://wss.aidanparkinson.xyz:443\", options);\nconsole.log(\"connected flag  \" + client.connected);\n\nclient.on(\"connect\",function(){\nconsole.log(\"connected  \"+ client.connected);\n})\n\nclass Form extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      rating: null,\n      description: null,\n    };\n  }\n\n  handleChange = ev => {\n    this.setState({\n      [ev.target.name]: ev.target.value\n    });\n  };\n\n  setRating = rating => {\n    this.setState({ rating: rating });\n  };\n\n  broadcastFeedback = () => {\n    client.publish(`anonymous-feedback/${macaddress}/json`, {likert_score: this.state.rating, description: this.state.description});\n    this.setState({ rating: null, description: null});\n  };\n\n  render() {\n   return (\n      <div>\n        <div className=\"form-input\">\n          <div className=\"form-input-rating\">\n            <StarRating\n              numberOfStars=\"5\"\n              currentRating={null}\n              onClick={this.setRating}\n            />\n          </div>\n          <div className=\"actions\">\n            <button onClick={this.broadcastFeedback}>\n              Submit\n            </button>\n          </div>\n          <textarea\n            name=\"description\"\n            id=\"description\"\n            onChange={this.handleChange}\n            placeholder=\"A description of your experience...\"\n            />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Form\n"],"sourceRoot":""}